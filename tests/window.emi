AttachConsole :: external (handle : ^void);
ATTACH_PARENT_PROCESS :: -1;

CreateWindowExA :: external (
		dwExStyle : u32,
		lpClassName : ^u8,
		lpWindowName : ^u8,
		dwStyle : u32,
		x : s64,
		y : s64,
		nWidth : s64,
		nHeight : s64,
		hWndParent : ^void,
		hMenu : ^void,
		hInstance : ^void,
		lpParam : ^void
	) -> ^void;
WS_CLIPCHILDREN :: 0x02000000;
WS_CLIPSIBLINGS :: 0x04000000;

WNDCLASSEXA :: struct
{
	cbSize : u32;
	style : u32;
	lpfnWndProc : ^void;
	cbClsExtra : s32;
	cbWndExtra : s32;
	hInstance : ^void;
	hIcon : ^void;
	hCursor : ^void;
	hBrush : ^void;
	lpszMenuName : ^u8;
	lpszClassName : ^u8;
	hIconSm : ^void;
};

WinMain :: (hInstance : ^void, hPrevInstance : ^void, lpCmdLine : ^u8, showCmd : s64) -> s64
{
	AttachConsole(ATTACH_PARENT_PROCESS);
	Print("Hello\n");

	windowClassName := "window\0";
	windowTitle := "Hello, Sailor!\0";

	windowClass : WNDCLASSEXA;
	windowClass.cbSize = sizeof(windowClass);
	windowClass.style = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
	windowClass.lpfnWndProc = Win32WindowCallback;
	windowClass.hInstance = hInstance;
	windowClass.lpszClassName = windowClassName;

	success : bool = RegisterClassEx(windowClassName.data);

	window := CreateWindowExA(0, windowClassName.data, windowTitle.data, WS_CLIPSIBLINGS | WS_CLIPCHILDREN,
			0, 0, 1, 1, 0, 0, hInstance, 0);

	Print("Test ok\n");
	return 0;
}

Main :: () -> s64
{
	Print("Sailor\n");
	return 0;
}
